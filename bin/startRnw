#! /usr/bin/env python3

from __future__ import print_function
import os
import subprocess
import sys

if len(sys.argv) >= 2:
    newfile = sys.argv[1]
    new_dir = os.path.dirname(newfile)
    new_dir = new_dir if new_dir else os.getcwd()
else:
    print('Usage: startLatex filename')
    sys.exit(1)

data_dir = os.getenv('DATA_DIR')
assert data_dir

template = data_dir + '/rnw_template.Rnw'
assert os.path.isfile(template)

rnw_makefile = data_dir + '/rnw_Makefile'
assert os.path.isfile(rnw_makefile)
make_dest = '{}/Makefile'.format(new_dir)

subprocess.run(['cp', template, newfile])
subprocess.run(['cp', rnw_makefile, make_dest])
